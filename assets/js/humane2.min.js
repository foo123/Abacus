/**
 * humane2.js
 * Humanized Messages for Notifications
 *
 * @VERSION 1.0.0
 * https://github.com/foo123/humane2.js
 *
 * adapted from https://github.com/wavded/humane-js
 * @license MIT
 */
!function(e,t,n){"undefined"!=typeof module?module.exports=n():"function"==typeof define&&"object"==typeof define.amd?define(n):t[e]=n()}("humane2","undefined"!=typeof self?self:this,function(e,t){"use strict";function s(e){return"function"==typeof e}var o=window,n=document,u=Object.prototype.hasOwnProperty,r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e){var t=this;e=e||{},t.queue=[],t.baseCls=e.baseCls||"humane",t.addnCls=e.addnCls||"",t.timeout="timeout"in e?e.timeout:2500,t.waitForMove=e.waitForMove||!1,t.clickToClose=e.clickToClose||!1,t.timeoutAfterMove=e.timeoutAfterMove||!1,t.container=e.container;try{l.call(t)}catch(e){d(o,"load",h(l,t))}}function l(){var e=this,t=n.createElement("div");if(t.style.display="none",!e.container){if(!n.body)throw"no document.body";e.container=n.body}e.container.appendChild(t),e.el=t,e.removeEvent=h(function(){var e=y(this.currentMsg.timeoutAfterMove,this.timeoutAfterMove);e?setTimeout(h(this.remove,this),e):this.remove()},e),e.transEvent=h(v,e),c(e)}function c(e){var t,n;!e._animating&&e.queue.length&&e.el&&(e._animating=!0,e.currentTimer&&(clearTimeout(e.currentTimer),e.currentTimer=null),y((t=e.queue.shift()).clickToClose,e.clickToClose)&&(d(e.el,"click",e.removeEvent),d(e.el,"touchstart",e.removeEvent)),0<(n=y(t.timeout,e.timeout))&&(e.currentTimer=setTimeout(h(m,e),n)),r(t.html)&&(t.html="<ul><li>"+t.html.join("<li>")+"</ul>"),e.el.innerHTML=t.html,e.currentMsg=t,e.el.className=e.baseCls,e.el.style.display="block",setTimeout(h(a,e),50))}function a(){var e=this,t=y(e.currentMsg.addnCls,e.addnCls);e.el.className=e.baseCls+" "+t+" "+e.baseCls+"-animate"}function v(){var e=this;f(e.el,"transitionend",e.transEvent),s(e.currentMsg.cb)&&e.currentMsg.cb(),e.el.style.display="none",e._animating=!1,c(e)}function m(){var e=this;y(e.currentMsg.waitForMove,e.waitForMove)?e.removeEventsSet||(d(n.body,"mousemove",e.removeEvent),d(n.body,"click",e.removeEvent),d(n.body,"keypress",e.removeEvent),d(n.body,"touchstart",e.removeEvent),e.removeEventsSet=!0):e.remove()}function d(e,t,n){"addEventListener"in o?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function f(e,t,n){"removeEventListener"in o?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}function h(e,t){return function(){e.apply(t,arguments)}}function y(e,t){return null!=e?e:t}return i.VERSION="1.0.0",i.prototype={constructor:i,queue:null,baseCls:"humane",addnCls:"",timeout:2500,currentTimer:null,waitForMove:!1,clickToClose:!1,timeoutAfterMove:!1,container:null,removeEventsSet:!1,_animating:!1,removeEvent:null,transEvent:null,currentMsg:null,remove:function(e){var t=this,e=s(e)?e:null;f(n.body,"mousemove",t.removeEvent),f(n.body,"click",t.removeEvent),f(n.body,"keypress",t.removeEvent),f(n.body,"touchstart",t.removeEvent),f(t.el,"click",t.removeEvent),f(t.el,"touchstart",t.removeEvent),t.removeEventsSet=!1,e&&t.currentMsg&&(t.currentMsg.cb=e),t._animating?function(){var e=this,t=y(e.currentMsg.addnCls,e.addnCls);e.el.className=e.baseCls+" "+t,d(e.el,"transitionend",e.transEvent)}.call(t):e&&e()},log:function(e,t,n,o){var r,i=this,l={};if(o)for(r in o)u.call(o,r)&&(l[r]=o[r]);if(s(t))n=t;else if(t)for(r in t)u.call(t,r)&&(l[r]=t[r]);return l.html=e,s(n)&&(l.cb=n),i.queue.push(l),c(i),i},spawn:function(o,r){var i=this;return function(e,t,n){return(!0===r?i.clone():i).log(e,t,n,o),i}},create:function(e){return new i(e)},clone:function(){var e=this;return new i({baseCls:e.baseCls,addnCls:e.addnCls,timeout:e.timeout,waitForMove:e.waitForMove,clickToClose:e.clickToClose,timeoutAfterMove:e.timeoutAfterMove,container:e.container})}},new i});